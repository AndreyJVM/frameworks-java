<properties>
    <!-- версия Aspectj -->
    <aspectj.version>1.9.7</aspectj.version>
    <!-- версия Allure -->
    <allure.version>2.15.0</allure.version>
</properties>

<dependencies>
<!-- модуль взаимодействия Allure и Junit -->
<dependency>
    <groupId>io.qameta.allure</groupId>
    <artifactId>allure-junit4</artifactId>
    <version>${allure.version}</version>
</dependency>
<dependency>
    <!-- модуль взаимодействия Allure и RestAssured -->
    <groupId>io.qameta.allure</groupId>
    <artifactId>allure-rest-assured</artifactId>
    <version>${allure.version}</version>
</dependency>
</dependencies>

<build>
<plugins>
    <plugin>
        <!-- настройка плагина maven-surefire-plugin -->
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-surefire-plugin</artifactId>
        <version>2.22.2</version>
        <configuration>
            <testFailureIgnore>false</testFailureIgnore>
            <argLine>
                -javaagent:"${settings.localRepository}/org/aspectj/aspectjweaver/${aspectj.version}/aspectjweaver-${aspectj.version}.jar"
            </argLine>
            <properties>
                <property>
                    <name>listener</name>
                    <value>io.qameta.allure.junit4.AllureJunit4</value>
                </property>
            </properties>
            <systemProperties>
                <property>
                    <!-- папка, в которую будут генерироваться отчёты Allure -->
                    <name>allure.results.directory</name>
                    <value>${project.build.directory}/allure-results</value>
                </property>
            </systemProperties>
        </configuration>
        <dependencies>
            <dependency>
                <groupId>org.aspectj</groupId>
                <artifactId>aspectjweaver</artifactId>
                <version>${aspectj.version}</version>
            </dependency>
        </dependencies>
    </plugin>
    <!-- подключение плагина allure-maven для вызова функций Allure с помощью Maven -->
    <plugin>
        <groupId>io.qameta.allure</groupId>
        <artifactId>allure-maven</artifactId>
        <version>2.10.0</version>
        <configuration>
            <reportVersion>2.15.0</reportVersion>
        </configuration>
    </plugin>
</plugins>
</build>